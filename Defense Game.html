<!DOCTYPE html>
<!-- saved from url=(0044)https://mini2317.github.io/Defense_game.html -->
<html lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Defense Game</title>
  <script type="text/javascript" src="./Defense Game_files/jquery.min.js.다운로드"></script>
  <script type="text/javascript">
  var enemy={};
  var tower={};
  var Situation=0;
  var map=[];
  var D=0;
  var mouse={
    x:0,
    y:0,
    click:0
  };
  window.addEventListener('mousemove',function(e){
    mouse.x=e.x;
    mouse.y=e.y;
  });
  $(document).click(function (evt) {
    mouse.click=1;
  })
  function draw(){
    var canvas = document.getElementById("MAIN");
    if(canvas.getContext){
      var ctx = canvas.getContext("2d");
      BG();
      switch (Situation) {
        case 0:
          Start();
          break;
        case 1:
          D+=1;
          drawTower(1,500,325,50,D);
          break;
      }
      requestAnimationFrame(draw);
    }
    mouse.click=0;
  }
  function drawTower(type,x,y,size,direction){
    var ctx = document.getElementById("MAIN").getContext("2d");
    ctx.beginPath();
    ctx.fillStyle="#606060";
    ctx.fillRect(x-size/2,y-size/2,size,size);
    ctx.stroke();
    ctx.beginPath();
    ctx.lineWidth=3*(size/50);
    ctx.strokeStyle="#202020";
    ctx.rect(x-size/2,y-size/2,size,size);
    ctx.stroke();
    ctx.beginPath();
    switch(type){
      case 1:
        ctx.strokeStyle="#202020";
        ctx.lineWidth=size/2-(size/10);
        ctx.moveTo(x,y);
        ctx.lineTo(x+Math.cos(Math.PI/180*(direction-90))*(size-size/10),y+Math.sin(Math.PI/180*(direction-90))*(size-size/10));
        ctx.stroke();
        ctx.beginPath();
        ctx.strokeStyle="#606060";
        ctx.lineWidth=size/2-(size/5);
        ctx.moveTo(x,y);
        ctx.lineTo(x+Math.cos(Math.PI/180*(direction-90))*((size-size/10)-3*(size/50)),y+Math.sin(Math.PI/180*(direction-90))*((size-size/10)-3*(size/50)));
        ctx.stroke();
        ctx.lineWidth=3*(size/50);
        ctx.beginPath();
        ctx.strokeStyle="#202020";
        ctx.arc(x,y,size/2-(5*size/50),0,Math.PI * 2);
        ctx.fillStyle = "#6060FF";
        ctx.fill();
        ctx.stroke();
      case 2:
        ;
    }
  }
  function BG(){
    var ctx = document.getElementById("MAIN").getContext("2d");
    ctx.fillStyle = "#62911A";
    ctx.fillRect(0,0,1000,650);
  }
  function Start(){
    var ctx = document.getElementById("MAIN").getContext("2d");
    ctx.fillStyle = "#FFFFFF";
    ctx.font = "100px Arial";
    ctx.textAlign = "middle";
    ctx.fillText("Defense Game", 200, 150);
    ctx.fillStyle = "#FFFFFF";
    ctx.fillRect(300,275,400,100);
    ctx.font = "75px Arial";
    ctx.fillStyle = "#000000";
    ctx.textAlign = "middle";
    ctx.fillText("START", 375, 350);
    if (300<=mouse.x&&mouse.x<=700&&275<=mouse.y&&mouse.y<=375&&mouse.click==1) {
      Situation=1;
      requestAnimationFrame(draw);
    }
  }
  function collision(ox,oy,rx,ry,rs,or){
    if ((rx-rs-or<=ox&& ox<=rx+rs+or)&&(ry-rs-or<=oy&&oy<=ry+rs+or)) {
      return 1;
    }else if (IsPointInCircle(ox,oy,or,rx-rs,ry+rs)) {
      return 1;
    }else if (IsPointInCircle(ox,oy,or,rx+rs,ry+rs)) {
      return 1;
    }else if (IsPointInCircle(ox,oy,or,rx-rs,ry-rs)) {
      return 1;
    }else if (IsPointInCircle(ox,oy,or,rx+rs,ry-rs)) {
      return 1;
    }
    return 0;
  }
  function IsPointInCircle(ox,oy,or,px,py){
    return Math.sqrt((ox-px)**2+(oy-py))<=or;
  }
  </script>
</head>
<body onload="draw()">
  <canvas id="MAIN" width="1000" height="650"></canvas>
</body
</html>